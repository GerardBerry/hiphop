
MODULE0
Module S U A B { 
   Fork { 
      Run MODULE1 W=A Z=B 
   } Par { 
      Halt 
   } 
} 


MODULE1
Module S U W Z { 
   Fork { 
      Emit W If USING present S 
   } Par { 
      Emit Z If USING present U 
   } 
} 


m.inputAndReact(S)
[ 'S', 'A' ]
==================== ADD RUN PARALLEL ==================

MODULE0
Module S U A B { 
   Fork { 
      Run MODULE1 W=A Z=B 
   } Par { 
      Halt 
   } Par { 
      Run MODULE2 Z=A 
   } 
} 


MODULE1
Module S U W Z { 
   Fork { 
      Emit W If USING present S 
   } Par { 
      Emit Z If USING present U 
   } 
} 


MODULE2
Module S U W Z { 
   Fork { 
      Emit W If USING present S 
   } Par { 
      Emit Z If USING present U 
   } 
} 


m.inputAndReact(U)
[ 'U', 'A' ]
